#!/usr/bin/env python
import sys
import rospy
#from commandrequester.srv import GateCodeRequest
from std_msgs.msg import String

def callback(data):
	rospy.loginfo(rospy.get_caller_id() + "Command received: %s", data.data)
	rospy.loginfo("Gate Code: %s", request)
def main():
	rospy.init_node('gatecoderequester')
	rospy.Subscriber('gateinfo_request', String, callback)
	rospy.wait_for_service("gate_code_request")
	try:
		gate_code_request = rospy.ServiceProxy('gate_code_request, GateCodeRequest')
		request = gate_code_request
		return request
	except rospy.ServiceException, e:
		print "Service call failed: %s"%e

	rospy.spin()	
if __name__ == '__main__':
	main()			
